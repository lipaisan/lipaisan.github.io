<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Hexo</title>
  <meta name="keywords" content="">
  <meta name="description" content="Hexo">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta property="og:type" content="article">
<meta property="og:title" content="2">
<meta property="og:url" content="http://example.com/2021/10/16/2-1/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2021/10/16/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20210706135708.jpg">
<meta property="og:image" content="http://example.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20210706135745.jpg">
<meta property="og:image" content="http://example.com/2021/10/16/2-1/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20210706140331.jpg">
<meta property="article:published_time" content="2021-10-16T09:12:31.000Z">
<meta property="article:modified_time" content="2021-10-16T10:13:13.782Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/10/16/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20210706135708.jpg">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 5.4.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>John Doe</span>
</div>

<div class="icon">
    
        
            <a title="rss"
               href="/atom.xml"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-rss"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="github"
               href="https://github.com/yelog"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="facebook"
               href="https://www.facebook.com/faker.tops"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-facebook"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
        
            <a title="instagram"
               href="https://www.facebook.com/faker.tops"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-instagram"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="reddit"
               href="https://www.reddit.com/user/yelog/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-reddit"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="weibo"
               href="http://weibo.com/u/2307534817"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-weibo"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="jianshu"
               href="https://www.jianshu.com/u/ff56736de7cf"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-jianshu"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="zhihu"
               href="https://www.zhihu.com/people/jaytp/activities"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-zhihu"></use>
                    </svg>
                
            </a>
        
    
        
    
        
            <a title="oschina"
               href="https://my.oschina.net/yelog"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-oschina"></use>
                    </svg>
                
            </a>
        
    
        
    
        
            <a title="email"
               href="mailto:jaytp@qq.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="qq"
               href="http://wpa.qq.com/msgrd?v=3&uin=872336115&site=qq&menu=yes"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="kugou"
               href="https://www.kugou.com/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-kugou"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="neteasemusic"
               href="https://music.163.com/#/user/home?id=88151013"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-neteasemusic"></use>
                    </svg>
                
            </a>
        
    
</div>




<ul>
    <li>
        <div class="all active" data-rel="All">All
            
                <small>(6)</small>
            
        </div>
    </li>
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">About</a>
        
        <a style="width: 50%"
                
                                           class="friends">Friends</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="6">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">å¶è½é˜</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="æœç´¢ å¿«æ·é”® i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="åˆ‡æ¢åˆ°å¤§çº²è§†å›¾ å¿«æ·é”® w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="è¿”å›"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="å¤§å°å†™æ•æ„Ÿ"></i>
            <i class="iconfont icon-tag" data-title="æ ‡ç­¾"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">å¤§çº²</div>
            <i class="iconfont icon-list" data-title="åˆ‡æ¢åˆ°æ–‡ç« åˆ—è¡¨"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        <a  class="All "
           href="/2021/10/16/2-1/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="2">2</span>
            <span class="post-date" title="2021-10-16 17:12:31">2021/10/16</span>
        </a>
        
        <a  class="All "
           href="/2021/10/16/%E6%88%91%E7%9A%84%E5%8D%9A%E5%AE%A2/hello/"
           data-tag=""
           data-author="" >
            <span class="post-title" title=""></span>
            <span class="post-date" title="2021-10-16 17:05:44">2021/10/16</span>
        </a>
        
        <a  class="All "
           href="/2021/10/16/bt/92.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF%E8%AF%A6%E8%A7%A3/"
           data-tag=""
           data-author="" >
            <span class="post-title" title=""></span>
            <span class="post-date" title="2021-10-16 13:13:35">2021/10/16</span>
        </a>
        
        <a  class="All "
           href="/2021/10/16/bt/2/"
           data-tag=""
           data-author="" >
            <span class="post-title" title=""></span>
            <span class="post-date" title="2021-10-16 13:13:35">2021/10/16</span>
        </a>
        
        <a  class="All "
           href="/2021/10/15/2/"
           data-tag=""
           data-author="" >
            <span class="post-title" title=""></span>
            <span class="post-date" title="2021-10-15 22:08:05">2021/10/15</span>
        </a>
        
        <a  class="All "
           href="/2021/10/15/92.Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF%E8%AF%A6%E8%A7%A3/"
           data-tag=""
           data-author="" >
            <span class="post-title" title=""></span>
            <span class="post-date" title="2021-10-15 21:55:21">2021/10/15</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-bt/2" class="article article-type-post" itemscope itemprop="blogPost">
    
    <div class="article-meta">
        
        
        
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2021-10-16 13:03:44'>2021-10-16 13:13</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            Views ğŸ‘€ :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF%E8%AF%A6%E8%A7%A3"><span class="toc-text">Dockerå®¹å™¨æŠ€æœ¯è¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker%E7%AE%80%E4%BB%8B"><span class="toc-text">Dockerç®€ä»‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Docker"><span class="toc-text">å®‰è£…Docker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Docker"><span class="toc-text">ä½¿ç”¨Docker</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E8%A1%8CNginx"><span class="toc-text">è¿è¡ŒNginx</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E8%A1%8CMySQL"><span class="toc-text">è¿è¡ŒMySQL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E8%A1%8CRedis"><span class="toc-text">è¿è¡ŒRedis</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E8%A1%8CGitLab"><span class="toc-text">è¿è¡ŒGitLab</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F"><span class="toc-text">æ„å»ºé•œåƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8commit%E5%91%BD%E4%BB%A4%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F"><span class="toc-text">ä½¿ç”¨commitå‘½ä»¤æ„å»ºé•œåƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Dockerfile%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F"><span class="toc-text">ä½¿ç”¨Dockerfileæ„å»ºé•œåƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Dockerfile%E6%8C%87%E4%BB%A4"><span class="toc-text">DockerfileæŒ‡ä»¤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86"><span class="toc-text">å¤šå®¹å™¨ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Docker-Compose"><span class="toc-text">Docker Compose</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kubernetes%EF%BC%88K8S%EF%BC%89"><span class="toc-text">Kubernetesï¼ˆK8Sï¼‰</span></a></li></ol></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Dockerå®¹å™¨æŠ€æœ¯è¯¦è§£"><a href="#Dockerå®¹å™¨æŠ€æœ¯è¯¦è§£" class="headerlink" title="Dockerå®¹å™¨æŠ€æœ¯è¯¦è§£"></a>Dockerå®¹å™¨æŠ€æœ¯è¯¦è§£</h2><p>Dockeræ˜¯åŸºäºGoè¯­è¨€å¼€å‘çš„å¼€æºåº”ç”¨å®¹å™¨å¼•æ“ï¼Œéµä»Apache Licence 2.0åè®®ï¼Œå¯ä»¥è®©å¼€å‘è€…æ‰“åŒ…åº”ç”¨ä»¥åŠåº”ç”¨çš„ä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°å„ç§å‘è¡Œç‰ˆæœ¬çš„Linuxç³»ç»Ÿä¸Šã€‚</p>
<h3 id="Dockerç®€ä»‹"><a href="#Dockerç®€ä»‹" class="headerlink" title="Dockerç®€ä»‹"></a>Dockerç®€ä»‹</h3><p>è½¯ä»¶å¼€å‘ä¸­æœ€ä¸ºéº»çƒ¦çš„äº‹æƒ…å¯èƒ½å°±æ˜¯é…ç½®ç¯å¢ƒäº†ã€‚ç”±äºç”¨æˆ·ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿå…·æœ‰å¤šæ ·æ€§ï¼Œå³ä¾¿ä½¿ç”¨è·¨å¹³å°çš„å¼€å‘è¯­è¨€ï¼ˆå¦‚Javaå’ŒPythonï¼‰éƒ½ä¸èƒ½ä¿è¯ä»£ç èƒ½å¤Ÿåœ¨å„ç§å¹³å°ä¸‹éƒ½å¯ä»¥æ­£å¸¸çš„è¿è½¬ï¼Œè€Œä¸”åœ¨ä¸åŒçš„ç¯å¢ƒä¸‹æˆ‘ä»¬å®‰è£…çš„è½¯ä»¶éœ€è¦ä¾èµ–çš„è½¯ä»¶åŒ…ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬å®‰è£…è½¯ä»¶çš„æ—¶å€™å¯ä¸å¯ä»¥æŠŠè½¯ä»¶è¿è¡Œçš„ç¯å¢ƒä¸€å¹¶å®‰è£…ï¼Ÿæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥æŠŠåŸå§‹ç¯å¢ƒä¸€æ¨¡ä¸€æ ·åœ°å¤åˆ¶è¿‡æ¥å‘¢ï¼Ÿ</p>
<p>è™šæ‹Ÿæœºï¼ˆvirtual machineï¼‰å°±æ˜¯å¸¦ç¯å¢ƒå®‰è£…çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥åœ¨ä¸€ç§æ“ä½œç³»ç»Ÿé‡Œé¢è¿è¡Œå¦ä¸€ç§æ“ä½œç³»ç»Ÿï¼Œæ¯”å¦‚åœ¨Windowsç³»ç»Ÿé‡Œé¢è¿è¡ŒLinuxç³»ç»Ÿï¼Œåœ¨macOSä¸Šè¿è¡ŒWindowsï¼Œè€Œåº”ç”¨ç¨‹åºå¯¹æ­¤æ¯«æ— æ„ŸçŸ¥ã€‚ä½¿ç”¨è¿‡è™šæ‹Ÿæœºçš„äººéƒ½çŸ¥é“ï¼Œè™šæ‹Ÿæœºç”¨èµ·æ¥è·ŸçœŸå®ç³»ç»Ÿä¸€æ¨¡ä¸€æ ·ï¼Œè€Œå¯¹äºè™šæ‹Ÿæœºçš„å®¿ä¸»ç³»ç»Ÿæ¥è¯´ï¼Œè™šæ‹Ÿæœºå°±æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œä¸éœ€è¦äº†å°±åˆ æ‰ï¼Œå¯¹å®¿ä¸»ç³»ç»Ÿæˆ–è€…å…¶ä»–çš„ç¨‹åºå¹¶æ²¡æœ‰å½±å“ã€‚ä½†æ˜¯è™šæ‹Ÿæœºé€šå¸¸ä¼šå ç”¨è¾ƒå¤šçš„ç³»ç»Ÿèµ„æºï¼Œå¯åŠ¨å’Œå…³é—­ä¹Ÿéå¸¸çš„ç¼“æ…¢ï¼Œæ€»ä¹‹ç”¨æˆ·ä½“éªŒå¹¶æ²¡æœ‰æƒ³è±¡ä¸­çš„é‚£ä¹ˆå¥½ã€‚</p>
<p>Dockerå±äºå¯¹Linuxå®¹å™¨æŠ€æœ¯ï¼ˆLXCï¼‰çš„ä¸€ç§å°è£…ï¼ˆåˆ©ç”¨äº†Linuxçš„namespaceå’ŒcgroupæŠ€æœ¯ï¼‰ï¼Œå®ƒæä¾›äº†ç®€å•æ˜“ç”¨çš„å®¹å™¨ä½¿ç”¨æ¥å£ï¼Œæ˜¯ç›®å‰æœ€æµè¡Œçš„ Linux å®¹å™¨è§£å†³æ–¹æ¡ˆã€‚Dockerå°†åº”ç”¨ç¨‹åºä¸è¯¥ç¨‹åºçš„ä¾èµ–æ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œè¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿå®¹å™¨ã€‚ç¨‹åºåœ¨è¿™ä¸ªè™šæ‹Ÿå®¹å™¨é‡Œè¿è¡Œï¼Œå°±å¥½åƒåœ¨çœŸå®çš„ç‰©ç†æœºä¸Šè¿è¡Œä¸€æ ·ã€‚ä¸‹å›¾æ˜¯è™šæ‹Ÿæœºå’Œå®¹å™¨çš„å¯¹æ¯”ï¼Œå·¦è¾¹æ˜¯ä¼ ç»Ÿçš„è™šæ‹Ÿæœºï¼Œå³è¾¹æ˜¯Dockerã€‚</p>
<p><img src="../../../../res/docker_vs_vm.png"></p>
<p>ç›®å‰ï¼ŒDockerä¸»è¦ç”¨äºå‡ ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li>æä¾›ä¸€æ¬¡æ€§çš„ç¯å¢ƒã€‚</li>
<li>æä¾›å¼¹æ€§çš„äº‘æœåŠ¡ï¼ˆåˆ©ç”¨Dockerå¾ˆå®¹æ˜“å®ç°æ‰©å®¹å’Œæ”¶ç¼©ï¼‰ã€‚</li>
<li>å®è·µå¾®æœåŠ¡æ¶æ„ï¼ˆéš”ç¦»çœŸå®ç¯å¢ƒåœ¨å®¹å™¨ä¸­è¿è¡Œå¤šä¸ªæœåŠ¡ï¼‰ã€‚</li>
</ol>
<h3 id="å®‰è£…Docker"><a href="#å®‰è£…Docker" class="headerlink" title="å®‰è£…Docker"></a>å®‰è£…Docker</h3><p>ä¸‹é¢ä»¥CentOSä¸ºä¾‹è®²è§£å¦‚ä½•å®‰è£…Dockerï¼Œä½¿ç”¨<a target="_blank" rel="noopener" href="https://docs.docker.com/install/linux/docker-ce/ubuntu/">Ubuntu</a>ã€<a target="_blank" rel="noopener" href="https://docs.docker.com/docker-for-mac/install/">macOS</a>æˆ–<a target="_blank" rel="noopener" href="https://docs.docker.com/docker-for-windows/install/">Windows</a>çš„ç”¨æˆ·å¯ä»¥é€šè¿‡ç‚¹å‡»å¯¹åº”çš„é“¾æ¥äº†è§£è¿™äº›å¹³å°ä¸‹å¦‚ä½•è¿›è¡Œå®‰è£…ã€‚</p>
<ol>
<li><p>ç¡®å®šæ“ä½œç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ï¼ˆCentOS 7è¦æ±‚64ä½ï¼Œå†…æ ¸ç‰ˆæœ¬3.10+ï¼›CentOS 6è¦æ±‚64ä½ï¼Œå†…æ ¸ç‰ˆæœ¬2.6+ï¼‰ã€‚</p>
<pre><code class="Bash">uname -r
</code></pre>
</li>
<li><p>æ›´æ–°ç³»ç»Ÿåº•å±‚çš„åº“æ–‡ä»¶ï¼ˆå»ºè®®ä¸€å®šè¦æ‰§è¡Œï¼Œå¦åˆ™åœ¨ä½¿ç”¨Dockeræ—¶å¯èƒ½ä¼šå‡ºç°è«åå…¶å¦™çš„é—®é¢˜ï¼‰ã€‚</p>
<pre><code class="Bash">yum update
</code></pre>
</li>
<li><p>ç§»é™¤å¯èƒ½å­˜åœ¨çš„æ—§çš„Dockerç‰ˆæœ¬ã€‚</p>
<pre><code class="Bash">yum list installed | grep docker
yum erase -y docker docker-common docker-engine
</code></pre>
</li>
<li><p>å®‰è£…yumå·¥å…·åŒ…å’Œä¾èµ–é¡¹ã€‚</p>
<pre><code class="Bash">yum install -y yum-utils device-mapper-persistent-data lvm2
</code></pre>
</li>
<li><p>é€šè¿‡yumå·¥å…·åŒ…æ·»åŠ yumæºï¼ˆå®‰è£…Docker-ceçš„æºï¼‰ã€‚</p>
<pre><code class="Bash">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
</code></pre>
</li>
<li><p>åœ¨CentOSä¸‹ä½¿ç”¨yumå®‰è£…Docker-ceå¹¶å¯åŠ¨ã€‚</p>
<pre><code class="Bash">yum -y install docker-ce
systemctl start docker
</code></pre>
</li>
<li><p>æŸ¥çœ‹Dockerçš„ä¿¡æ¯å’Œç‰ˆæœ¬ã€‚</p>
<pre><code class="Shell">docker version
docker info
</code></pre>
</li>
</ol>
<p>æ¥ä¸‹æ¥å¯ä»¥é€šè¿‡ä¸‹è½½é•œåƒå’Œåˆ›å»ºå®¹å™¨æ¥çœ‹çœ‹Dockeræ˜¯å¦å¯ä»¥è¿è½¬èµ·æ¥ã€‚å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ä»Dockerçš„é•œåƒä»“åº“ä¸‹è½½åä¸ºhello-worldçš„é•œåƒæ–‡ä»¶ã€‚</p>
<pre><code class="Shell">docker pull hello-world
</code></pre>
<p>æŸ¥çœ‹æ‰€æœ‰é•œåƒæ–‡ä»¶ã€‚</p>
<pre><code class="Shell">docker images
</code></pre>
<pre><code>REPOSITORY               TAG        IMAGE ID            CREATED             SIZE
docker.io/hello-world    latest     fce289e99eb9        7 months ago        1.84 kB
</code></pre>
<p>é€šè¿‡é•œåƒæ–‡ä»¶åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨ã€‚</p>
<pre><code class="Shell">docker container run --name mycontainer hello-world
</code></pre>
<blockquote>
<p>è¯´æ˜ï¼šå…¶ä¸­<code>mycontainer</code>æ˜¯æˆ‘ä»¬ç»™å®¹å™¨èµ·çš„åå­—ï¼Œè·Ÿåœ¨<code>--name</code>å‚æ•°ä¹‹åï¼›<code>hello-world</code>å°±æ˜¯æˆ‘ä»¬åˆšæ‰ä¸‹è½½çš„é•œåƒæ–‡ä»¶ã€‚</p>
</blockquote>
<pre><code>Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/
</code></pre>
<p>å¦‚æœè¦åˆ é™¤è¿™ä¸ªå®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p>
<pre><code class="Shell">docker container rm mycontainer
</code></pre>
<p>åœ¨åˆ é™¤å®¹å™¨ä¹‹åï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ é™¤åˆšæ‰ä¸‹è½½çš„é•œåƒæ–‡ä»¶ã€‚</p>
<pre><code class="Shell">docker rmi hello-world
</code></pre>
<blockquote>
<p>è¯´æ˜ï¼šå¦‚æœè¦åœ¨Ubuntuï¼ˆå†…æ ¸ç‰ˆæœ¬3.10+ï¼‰ä¸‹é¢å®‰è£…å’Œå¯åŠ¨Dockerï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹çš„æ­¥éª¤è¿›è¡Œã€‚</p>
<pre><code class="Shell">apt update
apt install docker-ce
service docker start
</code></pre>
<p>å›½å†…ç”¨æˆ·å¯ä»¥é€šè¿‡æ›´æ¢Ubuntuè½¯ä»¶ä¸‹è½½æºæ¥æå‡ä¸‹è½½é€Ÿåº¦ï¼Œå…·ä½“è¯·å‚ç…§æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ä¸Šçš„<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/">ã€ŠUbuntué•œåƒä½¿ç”¨å¸®åŠ©ã€‹</a>ã€‚</p>
</blockquote>
<p>å®‰è£…Dockeråï¼Œç”±äºç›´æ¥è®¿é—®<a target="_blank" rel="noopener" href="https://hub.docker.com/">dockerhub</a>ä¸‹è½½é•œåƒä¼šéå¸¸ç¼“æ…¢ï¼Œå»ºè®®å°†æœåŠ¡å™¨æ›´æ¢ä¸ºå›½å†…é•œåƒï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ <code>/etc/docker/daemon.json</code> æ–‡ä»¶æ¥åšåˆ°ã€‚ä¸€èˆ¬çš„äº‘æœåŠ¡å™¨ä¼šæœ‰è‡ªå·±ä¸“å±çš„é•œåƒï¼Œå°±ä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹äº†ã€‚</p>
<pre><code class="JavaScript">&#123;
    &quot;registry-mirrors&quot;: [
        &quot;http://hub-mirror.c.163.com&quot;,
        &quot;https://registry.docker-cn.com&quot;
    ]
&#125;
</code></pre>
<h3 id="ä½¿ç”¨Docker"><a href="#ä½¿ç”¨Docker" class="headerlink" title="ä½¿ç”¨Docker"></a>ä½¿ç”¨Docker</h3><p>æƒ³è¦ç©è½¬Dockerï¼Œæœ€ç®€å•çš„åŠæ³•å°±æ˜¯é©¬ä¸Šç”¨Dockeråˆ›å»ºä¸€äº›è‡ªå·±å­¦ä¹ å’Œå·¥ä½œä¸­éœ€è¦ç”¨åˆ°çš„å®¹å™¨ï¼Œä¸‹é¢æˆ‘ä»¬å¸¦ç€å¤§å®¶ä¸€èµ·æ¥åˆ›å»ºè¿™äº›å®¹å™¨ã€‚</p>
<h4 id="è¿è¡ŒNginx"><a href="#è¿è¡ŒNginx" class="headerlink" title="è¿è¡ŒNginx"></a>è¿è¡ŒNginx</h4><p>Nginxæ˜¯é«˜æ€§èƒ½çš„WebæœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿæ˜¯åšåå‘ä»£ç†æœåŠ¡å™¨çš„ä¸Šä½³é€‰æ‹©ã€‚ä½¿ç”¨Dockerå¯ä»¥éå¸¸ç®€å•çš„åˆ›å»ºä¸€ä¸ªè¿è¡ŒNginxçš„å®¹å™¨ï¼Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code class="Shell">docker container run -d -p 80:80 --rm --name mynginx nginx
</code></pre>
<blockquote>
<p>è¯´æ˜ï¼šä¸Šé¢çš„å‚æ•°<code>-d</code>è¡¨ç¤ºå®¹å™¨åœ¨åå°è¿è¡Œï¼ˆä¸äº§ç”Ÿè¾“å‡ºåˆ°Shellï¼‰å¹¶æ˜¾ç¤ºå®¹å™¨çš„IDï¼›<code>-p</code>æ˜¯ç”¨æ¥æ˜ å°„å®¹å™¨çš„ç«¯å£åˆ°å®¿ä¸»æœºçš„ç«¯å£ï¼Œå†’å·å‰é¢æ˜¯å®¿ä¸»æœºçš„ç«¯å£ï¼Œå†’å·åé¢æ˜¯å®¹å™¨å†…éƒ¨ä½¿ç”¨çš„ç«¯å£ï¼›<code>--rm</code>è¡¨ç¤ºå®¹å™¨åœæ­¢åè‡ªåŠ¨åˆ é™¤å®¹å™¨ï¼Œä¾‹å¦‚æ‰§è¡Œå‘½ä»¤<code>docker container stop mynginx</code>åï¼Œå®¹å™¨å°±ä¸å¤å­˜åœ¨äº†ï¼›<code>--name</code>åé¢çš„mynginxæ˜¯è‡ªå®šä¹‰çš„å®¹å™¨åå­—ï¼›åœ¨åˆ›å»ºå®¹å™¨çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç”¨åˆ°nginxçš„é•œåƒæ–‡ä»¶ï¼Œé•œåƒæ–‡ä»¶çš„ä¸‹è½½æ˜¯è‡ªåŠ¨å®Œæˆçš„ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šç‰ˆæœ¬å·ï¼Œé»˜è®¤æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼ˆlatestï¼‰ã€‚</p>
</blockquote>
<p>å¦‚æœéœ€è¦å°†è‡ªå·±çš„Webé¡¹ç›®ï¼ˆé¡µé¢ï¼‰éƒ¨ç½²åˆ°Nginxä¸Šï¼Œå¯ä»¥ä½¿ç”¨å®¹å™¨æ‹·è´å‘½ä»¤å°†æŒ‡å®šè·¯å¾„ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ‹·è´åˆ°å®¹å™¨çš„æŒ‡å®šç›®å½•ä¸­ã€‚</p>
<pre><code class="Shell">docker container cp /root/web/index.html mynginx:/usr/share/nginx/html
</code></pre>
<p>å¦‚æœä¸æ„¿æ„æ‹·è´æ–‡ä»¶ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºå®¹å™¨æ—¶é€šè¿‡æ•°æ®å·æ“ä½œ<code>--volume</code>å°†æŒ‡å®šçš„æ–‡ä»¶å¤¹æ˜ å°„åˆ°å®¹å™¨çš„æŸä¸ªç›®å½•ä¸­ï¼Œä¾‹å¦‚å°†Webé¡¹ç›®çš„æ–‡ä»¶å¤¹ç›´æ¥æ˜ å°„åˆ°<code>/usr/share/nginx/html</code>ç›®å½•ã€‚æˆ‘ä»¬å…ˆé€šè¿‡ä¸‹é¢çš„å‘½ä»¤è®©åˆšæ‰åˆ›å»ºçš„å®¹å™¨åœæ­¢è¿è¡Œã€‚</p>
<pre><code class="Shell">docker container stop mynginx
</code></pre>
<p>ç„¶åç”¨ä¸‹é¢çš„å‘½ä»¤é‡æ–°åˆ›å»ºå®¹å™¨ã€‚</p>
<pre><code class="Shell">docker container run -d -p 80:80 --rm --name mynginx --volume /root/docker/nginx/html:/usr/share/nginx/html nginx
</code></pre>
<blockquote>
<p>è¯´æ˜ï¼šä¸Šé¢åˆ›å»ºå®¹å™¨å’Œæ‹·è´æ–‡ä»¶çš„å‘½ä»¤ä¸­ï¼Œ<code>container</code>æ˜¯å¯ä»¥çœç•¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´<code>docker container run</code>å’Œ<code>docker run</code>æ˜¯ä¸€æ ·çš„ï¼Œè€Œ<code>docker container cp</code>å’Œ<code>docker cp</code>æ˜¯ä¸€æ ·çš„ã€‚æ­¤å¤–ï¼Œå‘½ä»¤ä¸­çš„<code>--volume</code>ä¹Ÿå¯ä»¥ç¼©å†™ä¸º<code>-v</code>ï¼Œå°±å¦‚åŒ<code>-d</code>æ˜¯<code>--detach</code>çš„ç¼©å†™ï¼Œ<code>-p</code>æ˜¯<code>--publish</code>çš„ç¼©å†™ã€‚<code>$PWD</code>ä»£è¡¨å®¿ä¸»ç³»ç»Ÿå½“å‰æ–‡ä»¶å¤¹ï¼Œè¿™äº›å¯¹äºä½¿ç”¨è¿‡Unixæˆ–è€…Linuxç³»ç»Ÿçš„äººæ¥è¯´ï¼Œåº”è¯¥æ˜¯å¾ˆå®¹æ˜“ç†è§£çš„ã€‚</p>
</blockquote>
<p>è¦æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p>
<pre><code class="Shell">docker ps
</code></pre>
<pre><code>CONTAINER ID    IMAGE    COMMAND                  CREATED            STATUS             PORTS                 NAMES
3c38d2476384    nginx    &quot;nginx -g &#39;daemon ...&quot;   4 seconds ago      Up 4 seconds       0.0.0.0:80-&gt;80/tcp    mynginx
</code></pre>
<p>è¦å¯åŠ¨å’Œåœæ­¢å®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p>
<pre><code class="Shell">docker start mynginx
docker stop mynginx
</code></pre>
<p>ç”±äºåœ¨åˆ›å»ºå®¹å™¨æ—¶ä½¿ç”¨äº†<code>--rm</code>é€‰é¡¹ï¼Œå®¹å™¨åœ¨åœæ­¢æ—¶ä¼šè¢«ç§»é™¤ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰å®¹å™¨æ—¶ï¼Œåº”è¯¥å·²ç»çœ‹ä¸åˆ°åˆšæ‰çš„<code>mynginx</code>å®¹å™¨äº†ã€‚</p>
<pre><code class="Shell">docker container ls -a
</code></pre>
<p>å¦‚æœåœ¨åˆ›å»ºå®¹å™¨æ—¶æ²¡æœ‰æŒ‡å®š<code>--rm</code>é€‰é¡¹ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥åˆ é™¤å®¹å™¨ã€‚</p>
<pre><code class="Shell">docker rm mynginx
</code></pre>
<p>è¦åˆ é™¤æ­£åœ¨è¿è¡Œä¸­çš„å®¹å™¨ï¼Œéœ€è¦ä½¿ç”¨<code>-f</code>é€‰é¡¹ã€‚</p>
<pre><code class="Shell">docker rm -f mynginx
</code></pre>
<h4 id="è¿è¡ŒMySQL"><a href="#è¿è¡ŒMySQL" class="headerlink" title="è¿è¡ŒMySQL"></a>è¿è¡ŒMySQL</h4><p>æˆ‘ä»¬å†æ¥å°è¯•ç”¨Dockerå®‰è£…ä¸€å°MySQLæœåŠ¡å™¨ï¼Œé¦–å…ˆå¯ä»¥å…ˆæ£€æŸ¥ä¸€ä¸‹æœ‰æ²¡æœ‰MySQLçš„é•œåƒæ–‡ä»¶ã€‚</p>
<pre><code class="Shell">docker search mysql
</code></pre>
<pre><code>INDEX        NAME            DESCRIPTION        STARS        OFFICIAL        AUTOMATED
docker.io    docker.io/mysql MySQL is a ...     8486         [OK]
...
</code></pre>
<blockquote>
<p>è¯´æ˜ï¼šä¸Šé¢æŸ¥è¯¢ç»“æœçš„åˆ—ä¾æ¬¡ä»£è¡¨ç´¢å¼•ã€é•œåƒåã€é•œåƒæè¿°ã€ç”¨æˆ·è¯„ä»·ã€æ˜¯å¦å®˜æ–¹é•œåƒã€è‡ªåŠ¨æ„å»ºã€‚</p>
</blockquote>
<p>ä¸‹è½½MySQLé•œåƒå¹¶æŒ‡å®šé•œåƒçš„ç‰ˆæœ¬å·ã€‚</p>
<pre><code class="Shell">docker pull mysql:5.7
</code></pre>
<p>å¦‚æœéœ€è¦æŸ¥çœ‹å·²ç»ä¸‹è½½çš„é•œåƒæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p>
<pre><code class="Shell">docker images
</code></pre>
<pre><code>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
docker.io/nginx     latest              e445ab08b2be        2 weeks ago         126 MB
docker.io/mysql     5.7                 f6509bac4980        3 weeks ago         373 MB
</code></pre>
<p>åˆ›å»ºå¹¶è¿è¡ŒMySQLå®¹å™¨ã€‚</p>
<pre><code class="Shell">docker run -d -p 3306:3306 --name mysql57 -v /root/docker/mysql/conf:/etc/mysql/mysql.conf.d -v /root/docker/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7
</code></pre>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šä¸Šé¢åˆ›å»ºå®¹å™¨æ—¶æˆ‘ä»¬åˆä¸€æ¬¡ä½¿ç”¨äº†æ•°æ®å·æ“ä½œï¼Œé‚£æ˜¯å› ä¸ºé€šå¸¸å®¹å™¨æ˜¯éšæ—¶åˆ›å»ºéšæ—¶åˆ é™¤çš„ï¼Œè€Œæ•°æ®åº“ä¸­çš„æ•°æ®å´æ˜¯éœ€è¦ä¿ç•™ä¸‹æ¥çš„ã€‚</p>
</blockquote>
<p>ä¸Šé¢çš„ä¸¤ä¸ªæ•°æ®å·æ“ä½œä¸€ä¸ªæ˜¯æ˜ å°„äº†MySQLé…ç½®æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œä¸€ä¸ªæ˜¯æ˜ å°„äº†MySQLæ•°æ®æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œè¿™ä¸¤ä¸ªæ•°æ®å·æ“ä½œéå¸¸é‡è¦ã€‚æˆ‘ä»¬å¯ä»¥å°†MySQLçš„é…ç½®æ–‡ä»¶æ”¾åœ¨<code>$PWD/mysql/conf</code>ç›®å½•ä¸‹ï¼Œé…ç½®æ–‡ä»¶çš„å…·ä½“å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="INI">[mysqld]
pid-file=/var/run/mysqld/mysqld.pid
socket=/var/run/mysqld/mysqld.sock
datadir=/var/lib/mysql
log-error=/var/log/mysql/error.log
server-id=1
log-bin=/var/log/mysql/mysql-bin.log
expire_logs_days=30
max_binlog_size=256M
symbolic-links=0
</code></pre>
<p>å¦‚æœå®‰è£…äº†MySQL 8.xç‰ˆæœ¬ï¼ˆç›®å‰çš„æœ€æ–°ç‰ˆæœ¬ï¼‰ï¼Œåœ¨ä½¿ç”¨å®¢æˆ·ç«¯å·¥å…·è¿æ¥æœåŠ¡å™¨æ—¶å¯èƒ½ä¼šé‡åˆ°<code>error 2059: Authentication plugin &#39;caching_sha2_password&#39; cannot be loaded</code>çš„é—®é¢˜ï¼Œè¿™æ˜¯å› ä¸ºMySQL 8.xé»˜è®¤ä½¿ç”¨äº†åä¸ºâ€œcaching_sha2_passwordâ€çš„æœºåˆ¶å¯¹ç”¨æˆ·å£ä»¤è¿›è¡Œäº†æ›´å¥½çš„ä¿æŠ¤ï¼Œä½†æ˜¯å¦‚æœå®¢æˆ·ç«¯å·¥å…·ä¸æ”¯æŒæ–°çš„è®¤è¯æ–¹å¼ï¼Œè¿æ¥å°±ä¼šå¤±è´¥ã€‚è§£å†³è¿™ä¸ªé—®é¢˜æœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€æ˜¯å‡çº§å®¢æˆ·ç«¯å·¥å…·æ¥æ”¯æŒMySQL 8.xçš„è®¤è¯æ–¹å¼ï¼›äºŒæ˜¯è¿›å…¥å®¹å™¨ï¼Œä¿®æ”¹MySQLçš„ç”¨æˆ·å£ä»¤è®¤è¯æ–¹å¼ã€‚ä¸‹é¢æ˜¯å…·ä½“çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å…ˆç”¨<code>docker exec</code>å‘½ä»¤è¿›å…¥å®¹å™¨çš„äº¤äº’å¼ç¯å¢ƒï¼Œå‡è®¾è¿è¡ŒMySQL 8.xçš„å®¹å™¨åå­—å«<code>mysql8x</code>ã€‚</p>
<pre><code class="Shell">docker exec -it mysql8x /bin/bash
</code></pre>
<p>è¿›å…¥å®¹å™¨çš„äº¤äº’å¼Shellä¹‹åï¼Œå¯ä»¥é¦–å…ˆåˆ©ç”¨MySQLçš„å®¢æˆ·ç«¯å·¥å…·è¿æ¥MySQLæœåŠ¡å™¨ã€‚</p>
<pre><code class="Shell">mysql -u root -p
Enter password:
Your MySQL connection id is 16
Server version: 8.0.12 MySQL Community Server - GPL
Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.
Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.
Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.
mysql&gt;
</code></pre>
<p>æ¥ä¸‹æ¥é€šè¿‡SQLæ¥ä¿®æ”¹ç”¨æˆ·å£ä»¤å°±å¯ä»¥äº†ã€‚</p>
<pre><code class="SQL">alter user &#39;root&#39;@&#39;%&#39; identified with mysql_native_password by &#39;123456&#39; password expire never;
</code></pre>
<p>å½“ç„¶ï¼Œå¦‚æœæ„¿æ„ä½ ä¹Ÿå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ç”¨æˆ·è¡¨æ£€æŸ¥æ˜¯å¦ä¿®æ”¹æˆåŠŸã€‚</p>
<pre><code class="SQL">use mysql;
select user, host, plugin, authentication_string from user where user=&#39;root&#39;;
+------+-----------+-----------------------+-------------------------------------------+
| user | host      | plugin                | authentication_string                     |
+------+-----------+-----------------------+-------------------------------------------+
| root | %         | mysql_native_password | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 |
| root | localhost | mysql_native_password | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 |
+------+-----------+-----------------------+-------------------------------------------+
2 rows in set (0.00 sec)
</code></pre>
<p>åœ¨å®Œæˆä¸Šé¢çš„æ­¥éª¤åï¼Œç°åœ¨å³ä¾¿ä¸æ›´æ–°å®¢æˆ·ç«¯å·¥å…·ä¹Ÿå¯ä»¥è¿æ¥MySQL 8.xäº†ã€‚</p>
<h4 id="è¿è¡ŒRedis"><a href="#è¿è¡ŒRedis" class="headerlink" title="è¿è¡ŒRedis"></a>è¿è¡ŒRedis</h4><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¯•ä¸€è¯•è¿è¡Œå¤šä¸ªå®¹å™¨å¹¶è®©å¤šä¸ªå®¹å™¨ä¹‹é—´é€šè¿‡ç½‘ç»œé€šä¿¡ã€‚æˆ‘ä»¬åˆ›å»º4ä¸ªRediså®¹å™¨æ¥å®ç°ä¸€ä¸»ä¸‰ä»çš„ä¸»ä»å¤åˆ¶ç»“æ„ã€‚</p>
<pre><code class="Shell">docker run -d -p 6379:6379 --name redis-master redis
docker run -d -p 6380:6379 --name redis-slave-1 --link redis-master:redis-master redis redis-server --replicaof redis-master 6379
docker run -d -p 6381:6379 --name redis-slave-2 --link redis-master:redis-master redis redis-server --replicaof redis-master 6379
docker run -d -p 6382:6379 --name redis-slave-3 --link redis-master:redis-master redis redis-server --replicaof redis-master 6379
</code></pre>
<p>ä¸Šé¢çš„å‘½ä»¤ä¸­ï¼Œ<code>--link</code>å‚æ•°ç”¨äºç»™å®¹å™¨åˆ›å»ºç½‘ç»œåˆ«åï¼Œå› ä¸ºä¸‰å°ä»æœºï¼ˆslaveï¼‰éœ€è¦é€šè¿‡ç½‘ç»œè¿æ¥è‡ªå·±çš„ä¸»æœºï¼ˆmasterï¼‰ã€‚è™½ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>docker inspect --format &#39;&#123;&#123; .NetworkSettings.IPAddress &#125;&#125;&#39; &lt;container-ID&gt;</code>å‘½ä»¤æ¥æŸ¥çœ‹åˆ°å®¹å™¨çš„IPåœ°å€ï¼Œä½†æ˜¯ç”±äºå®¹å™¨çš„å³è£…å³ç”¨æ€§ï¼Œå®¹å™¨çš„IPåœ°å€æœ‰å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨IPåœ°å€ï¼Œåœ¨å®¹å™¨é‡å¯åå°±å¯èƒ½ä¼šå› ä¸ºIPåœ°å€çš„å˜åŒ–å¯¼è‡´ä»æœºæ— æ³•è¿æ¥åˆ°ä¸»æœºã€‚ä½¿ç”¨<code>--link</code>å‚æ•°åˆ›å»ºç½‘ç»œåˆ«åå°±æ˜¯ä¸ºäº†åœ¨å¯åŠ¨RedisæœåŠ¡å™¨æ—¶åœ¨<code>redis-server</code>åé¢çš„<code>--replicaof</code>å‚æ•°åä½¿ç”¨è¿™ä¸ªåˆ«åè€Œä¸æ˜¯IPåœ°å€ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿›å…¥åä¸º<code>redis-master</code>çš„å®¹å™¨ï¼Œçœ‹çœ‹ä¸»ä»å¤åˆ¶çš„é…ç½®æ˜¯å¦æˆåŠŸã€‚</p>
<pre><code class="Shell">docker exec -it redis-master /bin/bash
</code></pre>
<p>é€šè¿‡<code>redis-cli</code>å¯åŠ¨å‘½ä»¤è¡Œå·¥å…·ã€‚</p>
<pre><code class="Shell">redis-cli
127.0.0.1:6379&gt; info replication
# Replication
role:master
connected_slaves:3
slave0:ip=172.17.0.4,port=6379,state=online,offset=1988,lag=0
slave1:ip=172.17.0.5,port=6379,state=online,offset=1988,lag=1
slave2:ip=172.17.0.6,port=6379,state=online,offset=1988,lag=1
master_replid:94703cfa03c3ddc7decc74ca5b8dd13cb8b113ea
master_replid2:0000000000000000000000000000000000000000
master_repl_offset:1988
second_repl_offset:-1
repl_backlog_active:1
repl_backlog_size:1048576
repl_backlog_first_byte_offset:1
repl_backlog_histlen:1988
</code></pre>
<h4 id="è¿è¡ŒGitLab"><a href="#è¿è¡ŒGitLab" class="headerlink" title="è¿è¡ŒGitLab"></a>è¿è¡ŒGitLab</h4><p>GitLabæ˜¯ç”±GitLab Inc.å¼€å‘çš„Gitä»“åº“ç®¡ç†å·¥å…·ï¼Œå…·æœ‰wikiã€é—®é¢˜è·Ÿè¸ªã€æŒç»­é›†æˆç­‰ä¸€ç³»åˆ—çš„åŠŸèƒ½ï¼Œåˆ†ä¸ºç¤¾åŒºç‰ˆå’Œä¼ä¸šç‰ˆã€‚é€šè¿‡Dockeræä¾›çš„è™šæ‹ŸåŒ–å®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥å®‰è£…ç¤¾åŒºç‰ˆçš„Dockerã€‚å› ä¸ºGitLabéœ€è¦ä½¿ç”¨SSHåè®®è¿›è¡Œå®‰å…¨è¿æ¥ï¼Œæˆ‘ä»¬è¦æš´éœ²å®¹å™¨çš„22ç«¯å£ï¼Œæ‰€ä»¥å¯ä»¥å…ˆå°†å®¿ä¸»æœºSSHè¿æ¥çš„22ç«¯å£ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£ï¼ˆå¦‚ï¼š12345ï¼‰ï¼Œç„¶åå†è¿›è¡Œåç»­çš„æ“ä½œã€‚</p>
<pre><code class="Shell">vim /etc/ssh/sshd_config
</code></pre>
<p>å°†å…¶ä¸­å®šä¹‰ç«¯å£çš„é‚£è¡Œä»£ç å»æ‰æ³¨é‡Šå¹¶å°†ç«¯å£ä¿®æ”¹ä¸º12345ã€‚</p>
<pre><code>Port 12345
</code></pre>
<p>é‡æ–°å¯åŠ¨<code>sshd</code>æœåŠ¡ã€‚ </p>
<pre><code class="Shell">systemctl restart sshd
</code></pre>
<blockquote>
<p><strong>æç¤º</strong>ï¼šä¿®æ”¹ç«¯å£ååº”è¯¥ç¡®ä¿é˜²ç«å¢™ä¸Šä¹Ÿå¼€å¯å¯¹åº”çš„ç«¯å£ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨SSHè¿æ¥åˆ°LinuxæœåŠ¡å™¨ã€‚</p>
</blockquote>
<p>åˆ›å»ºéœ€è¦ç”¨äºæ•°æ®å·æ˜ å°„æ“ä½œçš„æ–‡ä»¶å¤¹ã€‚</p>
<pre><code class="Shell">mkdir -p /root/gitlab/&#123;config,logs,data&#125;
</code></pre>
<p>åŸºäº<code>gitlab/gitlab-ce</code>é•œåƒåˆ›å»ºå®¹å™¨ï¼Œå¹¶æš´éœ²80ç«¯å£ï¼ˆHTTPè¿æ¥ï¼‰å’Œ22ç«¯å£ï¼ˆSSHè¿æ¥ï¼‰ã€‚</p>
<pre><code class="Shell">docker run -d -p 80:80 -p 22:22 --name gitlab -v /root/gitlab/config:/etc/gitlab -v /root/gitlab/logs:/var/log/gitlab -v /root/gitlab/data:/var/opt/gitlab gitlab/gitlab-ce
</code></pre>
<blockquote>
<p>è¯´æ˜ï¼šGitLabçš„å¯åŠ¨æ¯”è¾ƒç¼“æ…¢ï¼Œåˆ›å»ºå¥½å®¹å™¨åå¯èƒ½éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´æ‰èƒ½é€šè¿‡æµè§ˆå™¨æ¥è¿›è¡Œè®¿é—®ã€‚</p>
</blockquote>
<p>é¦–æ¬¡è¿›å…¥GitLabè®¿é—®ç•Œé¢ä¼šæç¤ºæˆ‘ä»¬ä¿®æ”¹ç®¡ç†å‘˜å¯†ç ï¼Œè®¾ç½®å¥½ç®¡ç†å‘˜å¯†ç åå°±å¯ä»¥åœ¨ç™»å½•ç•Œé¢è¾“å…¥ç”¨æˆ·å<code>root</code>å’Œåˆšæ‰è®¾ç½®çš„å¯†ç ç™»å½•åˆ°ç®¡ç†å‘˜æ§åˆ¶å°ï¼Œåœ¨ä½¿ç”¨ä¸Šè¿˜æ˜¯éå¸¸ç®€å•å’Œäººæ€§åŒ–çš„ã€‚</p>
<h3 id="æ„å»ºé•œåƒ"><a href="#æ„å»ºé•œåƒ" class="headerlink" title="æ„å»ºé•œåƒ"></a>æ„å»ºé•œåƒ</h3><p>é€šè¿‡ä¸Šé¢çš„è®²è§£ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†å¦‚ä½•é€šè¿‡å®˜æ–¹æä¾›çš„é•œåƒæ¥åˆ›å»ºå®¹å™¨ã€‚å½“ç„¶å¦‚æœæ„¿æ„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨é…ç½®å¥½çš„å®¹å™¨æ¥ç”Ÿæˆé•œåƒã€‚ç®€è€Œè¨€ä¹‹ï¼Œ<strong>Dockeré•œåƒæ˜¯ç”±æ–‡ä»¶ç³»ç»Ÿå åŠ è€Œæˆçš„ï¼Œç³»ç»Ÿçš„æœ€åº•å±‚æ˜¯bootfsï¼Œç›¸å½“äºå°±æ˜¯Linuxå†…æ ¸çš„å¼•å¯¼æ–‡ä»¶ç³»ç»Ÿï¼›æ¥ä¸‹æ¥ç¬¬äºŒå±‚æ˜¯rootfsï¼Œè¿™ä¸€å±‚å¯ä»¥æ˜¯ä¸€ç§æˆ–å¤šç§æ“ä½œç³»ç»Ÿï¼ˆå¦‚Debianæˆ–Ubuntuæ–‡ä»¶ç³»ç»Ÿï¼‰ï¼ŒDockerä¸­çš„rootfsæ˜¯åªè¯»çŠ¶æ€çš„ï¼›Dockeråˆ©ç”¨è”åˆæŒ‚è½½æŠ€æœ¯å°†å„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ åˆ°ä¸€èµ·ï¼Œæœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•ï¼Œè¿™æ ·çš„æ–‡ä»¶ç³»ç»Ÿå°±æ˜¯ä¸€ä¸ªé•œåƒ</strong>ã€‚</p>
<p>ä¹‹å‰æˆ‘ä»¬è®²è¿‡äº†å¦‚ä½•æŸ¥æ‰¾ã€åˆ—å‡ºé•œåƒå’Œæ‹‰å–ï¼ˆä¸‹è½½ï¼‰é•œåƒï¼Œæ¥ä¸‹æ¥çœ‹çœ‹æ„å»ºé•œåƒçš„ä¸¤ç§æ–¹å¼ï¼š</p>
<ol>
<li>ä½¿ç”¨<code>docker commit</code>å‘½ä»¤ã€‚ï¼ˆä¸æ¨èï¼‰</li>
<li>ä½¿ç”¨<code>docker build</code>å‘½ä»¤å’ŒDockerfileæ–‡ä»¶ã€‚</li>
</ol>
<h4 id="ä½¿ç”¨commitå‘½ä»¤æ„å»ºé•œåƒ"><a href="#ä½¿ç”¨commitå‘½ä»¤æ„å»ºé•œåƒ" class="headerlink" title="ä½¿ç”¨commitå‘½ä»¤æ„å»ºé•œåƒ"></a>ä½¿ç”¨commitå‘½ä»¤æ„å»ºé•œåƒ</h4><p>ä¸ºäº†æ¼”ç¤ºå¦‚ä½•æ„å»ºé•œåƒï¼Œæˆ‘ä»¬å…ˆä½¿ç”¨Ubuntué•œåƒæ¥å®šåˆ¶ä¸€ä¸ªå®¹å™¨ï¼Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code class="Shell">docker run --name myubuntu -it ubuntu /bin/bash
</code></pre>
<p>åœ¨å®¹å™¨ä¸­æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…ApacheæœåŠ¡å™¨å¹¶é€€å‡ºå®¹å™¨ã€‚</p>
<pre><code class="Shell">apt -y upgrade
apt -y install apache2
exit
</code></pre>
<p>æˆ‘ä»¬å°†è¿™ä¸ªå®¹å™¨ä½œä¸ºä¸€ä¸ªå®šåˆ¶çš„WebæœåŠ¡å™¨ä¿å­˜èµ·æ¥ï¼Œå½“éœ€è¦è¿™æ ·ä¸€å°WebæœåŠ¡å™¨çš„æ—¶å€™ï¼Œå°±æ²¡æœ‰å¿…è¦é‡æ–°åˆ›å»ºå®¹å™¨å¹¶å®‰è£…Apacheäº†ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹å®¹å™¨çš„IDã€‚</p>
<pre><code class="Shell">docker container ls -a
</code></pre>
<pre><code>docker container ls -a
CONTAINER ID    IMAGE    COMMAND        CREATED        STATUS        PORTS    NAMES
014bdb321612    ubuntu   &quot;/bin/bash&quot;    5 minutes ago  Exited (0)             myubuntu
</code></pre>
<p>æäº¤å®šåˆ¶çš„å®¹å™¨ã€‚</p>
<pre><code class="Shell">docker commit 014bdb321612 jackfrued/mywebserver
</code></pre>
<p>æŸ¥çœ‹é•œåƒæ–‡ä»¶ã€‚</p>
<pre><code class="Shell">docker images
</code></pre>
<pre><code>REPOSITORY              TAG       IMAGE ID        CREATED             SIZE
jackfrued/mywebserver   latest    795b294d265a    14 seconds ago      189 MB
</code></pre>
<p>ç”Ÿæˆé•œåƒæ–‡ä»¶ä»¥åï¼Œåé¢å°±å¯ä»¥åˆ©ç”¨åˆšæ‰åˆ›å»ºçš„é•œåƒæ–‡ä»¶æ¥åˆ›å»ºæ–°çš„å®¹å™¨ã€‚</p>
<h4 id="ä½¿ç”¨Dockerfileæ„å»ºé•œåƒ"><a href="#ä½¿ç”¨Dockerfileæ„å»ºé•œåƒ" class="headerlink" title="ä½¿ç”¨Dockerfileæ„å»ºé•œåƒ"></a>ä½¿ç”¨Dockerfileæ„å»ºé•œåƒ</h4><p>Dockerfileä½¿ç”¨DSLï¼ˆDomain Specific Languageï¼‰æ¥æ„å»ºä¸€ä¸ªDockeré•œåƒï¼Œåªè¦ç¼–è¾‘å¥½äº†Dockerfileæ–‡ä»¶ï¼Œå°±å¯ä»¥ä½¿ç”¨<code>docker build</code>å‘½ä»¤æ¥æ„å»ºä¸€ä¸ªæ–°çš„é•œåƒã€‚</p>
<p>æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªåä¸ºmyappçš„æ–‡ä»¶å¤¹æ¥ä¿å­˜é¡¹ç›®ä»£ç å’ŒDockerfileçš„æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="Shell">[ECS-root temp]# tree myapp
myapp
â”œâ”€â”€ api
â”‚   â”œâ”€â”€ app.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ start.sh
â””â”€â”€ Dockerfile
</code></pre>
<p>å…¶ä¸­apiæ˜¯Flaské¡¹ç›®çš„æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…æ‹¬äº†é¡¹ç›®ä»£ç ã€ä¾èµ–é¡¹ä»¥åŠå¯åŠ¨è„šæœ¬ç­‰æ–‡ä»¶ï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><code>app.py</code>æ–‡ä»¶ï¼š</p>
<pre><code class="Python">from flask import Flask
from flask_restful import Resource, Api
from flask_cors import CORS

app = Flask(__name__)
CORS(app, resources=&#123;r&#39;/api/*&#39;: &#123;&#39;origins&#39;: &#39;*&#39;&#125;&#125;)
api = Api(app)


class Product(Resource):

    def get(self):
        products = [&#39;Ice Cream&#39;, &#39;Chocolate&#39;, &#39;Coca Cola&#39;, &#39;Hamburger&#39;]
        return &#123;&#39;products&#39;: products&#125;


api.add_resource(Product, &#39;/api/products&#39;)
</code></pre>
<p><code>requirements.txt</code>æ–‡ä»¶ï¼š</p>
<pre><code class="INI">flask
flask-restful
flask-cors
gunicorn
</code></pre>
<p><code>start.sh</code>æ–‡ä»¶ï¼š</p>
<pre><code class="Shell">#!/bin/bash
exec gunicorn -w 4 -b 0.0.0.0:8000 app:app
</code></pre>
<blockquote>
<p><strong>æç¤º</strong>ï¼šéœ€è¦ç»™start.shæ–‡ä»¶ä»¥æ‰§è¡Œæƒé™ï¼Œå¯ä»¥ä½¿ç”¨<code>chmod 755 start.sh</code>å‘½ä»¤æ¥åšåˆ°ã€‚</p>
</blockquote>
<p>Dockerfileæ–‡ä»¶ï¼š</p>
<pre><code class="Dockerfile"># æŒ‡å®šåŸºç¡€é•œåƒ
FROM python:3.7
# æŒ‡å®šé•œåƒçš„ç»´æŠ¤è€…
MAINTAINER jackfrued &quot;jackfrued@126.com&quot;
# å°†æŒ‡å®šæ–‡ä»¶æ·»åŠ åˆ°å®¹å™¨ä¸­æŒ‡å®šçš„ä½ç½®
ADD api/* /root/api/
# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /root/api
# æ‰§è¡Œå‘½ä»¤(å®‰è£…Flaské¡¹ç›®çš„ä¾èµ–é¡¹)
RUN pip install -r requirements.txt -i https://pypi.doubanio.com/simple/
# å®¹å™¨å¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤
ENTRYPOINT [&quot;./start.sh&quot;]
# æš´éœ²ç«¯å£
EXPOSE 8000
</code></pre>
<p>æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹ä¸Šé¢çš„Dockerfileæ–‡ä»¶ã€‚Dockerfileæ–‡ä»¶é€šè¿‡ç‰¹æ®Šçš„æŒ‡ä»¤æ¥æŒ‡å®šåŸºç¡€é•œåƒï¼ˆFROMæŒ‡ä»¤ï¼‰ã€åˆ›å»ºå®¹å™¨åéœ€è¦æŒ‡å®šçš„å‘½ä»¤ï¼ˆRUNæŒ‡ä»¤ï¼‰ä»¥åŠéœ€è¦æš´éœ²çš„ç«¯å£ï¼ˆEXPOSEï¼‰ç­‰ä¿¡æ¯ã€‚æˆ‘ä»¬ç¨åä¼šä¸“é—¨ä¸ºå¤§å®¶ä»‹ç»è¿™äº›Dockfileä¸­çš„æŒ‡ä»¤ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>docker build</code>å‘½ä»¤æ¥åˆ›å»ºé•œåƒï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code class="Shell">docker build -t &quot;jackfrued/myapp&quot; .
</code></pre>
<blockquote>
<p>æç¤ºï¼šä¸Šé¢çš„å‘½ä»¤æœ€åé¢çš„<code>.</code> åƒä¸‡ä¸è¦æ¼æ‰äº†å“¦ï¼Œå®ƒè¡¨ç¤ºä»å½“å‰è·¯å¾„ä¸‹å¯»æ‰¾Dockerfileã€‚</p>
</blockquote>
<p>é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å¯ä»¥æŸ¥çœ‹åˆ›å»ºå¥½çš„é•œåƒã€‚</p>
<pre><code class="Shell">docker images
</code></pre>
<pre><code>REPOSITORY                   TAG                 IMAGE ID            CREATED             SIZE
jackfrued/myapp              latest              6d6f026a7896        5 seconds ago       930 MB
</code></pre>
<p>å¦‚æœæƒ³çŸ¥é“é•œåƒæ–‡ä»¶æ˜¯å¦‚ä½•åˆ›å»ºå‡ºæ¥çš„ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p>
<pre><code class="Shell">docker history jackfrued/myapp
</code></pre>
<pre><code>IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT
6d6f026a7896        31 seconds ago      /bin/sh -c #(nop)  EXPOSE 8000/tcp              0 B                 
3f7739173a79        31 seconds ago      /bin/sh -c #(nop)  ENTRYPOINT [&quot;./start.sh&quot;]    0 B                 
321e6bf09bf1        32 seconds ago      /bin/sh -c pip install -r requirements.txt...   13 MB               
2f9bf2c89ac7        37 seconds ago      /bin/sh -c #(nop) WORKDIR /root/api             0 B                 
86119afbe1f8        37 seconds ago      /bin/sh -c #(nop) ADD multi:4b76f9c9dfaee8...   870 B               
08d465e90d4d        3 hours ago         /bin/sh -c #(nop)  MAINTAINER jackfrued &quot;j...   0 B                 
fbf9f709ca9f        12 days ago         /bin/sh -c #(nop)  CMD [&quot;python3&quot;]              0 B 
</code></pre>
<p>ä½¿ç”¨è¯¥é•œåƒæ¥åˆ›å»ºå®¹å™¨è¿è¡ŒWebæœåŠ¡å™¨ã€‚</p>
<pre><code class="Shell">docker run -d -p 8000:8000 --name myapp jackfrued/myapp
</code></pre>
<p>å¦‚æœå¸Œæœ›å°†ä¸Šé¢åˆ›å»ºçš„é•œåƒæ–‡ä»¶æ”¾åˆ°dockerhubä»“åº“ä¸­ï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ‰€ç¤ºçš„æ­¥éª¤è¿›è¡Œæ“ä½œã€‚</p>
<p>é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ç™»å½•åˆ°dockerhubã€‚</p>
<pre><code class="Shell">docker login
</code></pre>
<p>è¾“å…¥ç”¨æˆ·åå’Œå£ä»¤è¿›è¡Œç™»å½•ã€‚</p>
<pre><code>Login with your Docker ID to push and pull images from Docker Hub. If you don&#39;t have a Docker ID, head over to https://hub.docker.com to create one.
Username: jackfrued
Password: 
Login Succeeded
</code></pre>
<p>é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å°†é•œåƒæ¨åˆ°ä»“åº“ä¸­ã€‚</p>
<pre><code class="Shell">docker push jackfrued/webserver
</code></pre>
<p><img src="./res/dockerhub-repo.png"></p>
<h4 id="DockerfileæŒ‡ä»¤"><a href="#DockerfileæŒ‡ä»¤" class="headerlink" title="DockerfileæŒ‡ä»¤"></a>DockerfileæŒ‡ä»¤</h4><p>æƒ³äº†è§£Dockerfileçš„æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹å®˜æ–¹æä¾›çš„<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/builder/">å‚è€ƒæ‰‹å†Œ</a>ï¼Œä¸‹é¢æˆ‘ä»¬ä¸ºå¤§å®¶ä»‹ç»ä¸€äº›å¸¸ç”¨çš„æŒ‡ä»¤ã€‚</p>
<ol>
<li><p><strong>FROM</strong>ï¼šè®¾ç½®åŸºç¡€é•œåƒï¼Œå¿…é¡»æ˜¯Dockerfileä¸­çš„ç¬¬ä¸€æ¡æŒ‡ä»¤ã€‚</p>
<pre><code class="Dockerfile">FROM &lt;é•œåƒå&gt; [AS &lt;åˆ«å&gt;]
</code></pre>
<p>æˆ–</p>
<pre><code class="Dockerfile">FROM &lt;é•œåƒå&gt;[:&lt;æ ‡ç­¾&gt;] [AS &lt;åˆ«å&gt;]
</code></pre>
</li>
<li><p><strong>RUN</strong>ï¼šæŒ‡å®šæ„å»ºé•œåƒæ—¶è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚</p>
<pre><code class="Dockerfile">RUN &lt;å‘½ä»¤&gt; [å‚æ•°1], [å‚æ•°2], ... 
</code></pre>
<p>æˆ–</p>
<pre><code class="Dockerfile">RUN [&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;, &quot;å‚æ•°1&quot;, &quot;å‚æ•°2&quot;, ...]
</code></pre>
</li>
<li><p><strong>CMD</strong>ï¼šæŒ‡å®šæ„å»ºé•œåƒåè¦æ‰§è¡Œçš„å‘½ä»¤ã€‚</p>
<pre><code class="Dockerfile">CMD &lt;å‘½ä»¤&gt; [å‚æ•°1], [å‚æ•°2], ...
</code></pre>
<p>æˆ–</p>
<pre><code class="Dockerfile">CMD [&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;, &quot;å‚æ•°1&quot;, &quot;å‚æ•°2&quot;, ...]
</code></pre>
<blockquote>
<p>è¯´æ˜ï¼šDockerä¸åŒäºè™šæ‹Ÿæœºï¼Œå®¹å™¨æœ¬èº«å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œå®¹å™¨ä¸­çš„åº”ç”¨åº”è¯¥ä½äºå‰å°è¿è¡Œã€‚CMDå‘½ä»¤ç›¸å½“äºå°±æ˜¯ç”¨æ¥æŒ‡å®šå®¹å™¨ä¸»è¿›ç¨‹ï¼ˆåˆ›å»ºå®¹å™¨åè¦åœ¨å‰å°æ‰§è¡Œçš„ç¨‹åºï¼‰çš„ï¼Œå¦‚æœä¸»è¿›ç¨‹ç»“æŸäº†ï¼Œå®¹å™¨ä¹Ÿå°±åœæ­¢è¿è¡Œäº†ã€‚æ‰€ä»¥åœ¨å®¹å™¨ä¸­å¯åŠ¨Nginxä¸èƒ½ä½¿ç”¨<code>service nginx start</code>æˆ–æ˜¯<code>systemctl start nginx</code>è€Œæ˜¯è¦é€šè¿‡<code>CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</code>è®©å®ƒåœ¨å‰å°è¿è¡Œã€‚</p>
</blockquote>
</li>
<li><p><strong>ENTRYPOINT</strong>ï¼šå’ŒCMDç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥æ‰§è¡Œå‘½ä»¤ï¼Œä½†<code>docker run</code>å‘½ä»¤è¡Œä¸­æŒ‡å®šçš„ä»»ä½•å‚æ•°éƒ½ä¼šè¢«å½“åšå‚æ•°å†æ¬¡ä¼ ç»™ENTRYPOINTæŒ‡ä»¤ä¸­çš„å‘½ä»¤ï¼Œè¿™å°±ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªé•œåƒï¼Œå®ƒæ—¢å¯ä»¥è¿è¡Œä¸€ä¸ªé»˜è®¤çš„å‘½ä»¤ï¼Œä¹Ÿæ”¯æŒé€šè¿‡<code>docker run</code>å‘½ä»¤è¡Œä¸ºè¯¥å‘½ä»¤æŒ‡å®šå¯è¦†ç›–çš„å‚æ•°é€‰é¡¹ã€‚</p>
<pre><code class="Dockerfile">ENTRYPOINT &lt;å‘½ä»¤&gt; [å‚æ•°1], [å‚æ•°2], ...
</code></pre>
<p>æˆ–</p>
<pre><code class="Dockerfile">ENTRYPOINT [&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;, &quot;å‚æ•°1&quot;, &quot;å‚æ•°2&quot;, ...]
</code></pre>
</li>
<li><p><strong>WORKDIR</strong>ï¼šåœ¨é€šè¿‡é•œåƒåˆ›å»ºæ–°å®¹å™¨æ—¶ï¼Œåœ¨å®¹å™¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªå·¥ä½œç›®å½•ï¼ŒENTRYPOINTå’ŒCMDæŒ‡å®šçš„ç¨‹åºä¼šåœ¨è¿™ä¸ªç›®å½•ä¸‹æ‰§è¡Œã€‚åœ¨ä½¿ç”¨<code>docker run</code>å‘½ä»¤æ—¶å¯ä»¥é€šè¿‡<code>-w</code>å‚æ•°æ¥è¦†ç›–ç”±WORKDIRæŒ‡å®šçš„å·¥ä½œç›®å½•ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="Dockerfile">WORKDIR /opt/webapp
</code></pre>
<pre><code class="Shell">docker run -w /usr/share/webapp ...
</code></pre>
</li>
<li><p><strong>ENV</strong>ï¼šåœ¨åˆ›å»ºé•œåƒæ—¶è®¾ç½®ç¯å¢ƒå˜é‡ã€‚åœ¨ä½¿ç”¨<code>docker run</code>å‘½ä»¤æ—¶ï¼Œå¯ä»¥é€šè¿‡<code>-e</code>å‚æ•°æ¥ä¿®æ”¹ç¯å¢ƒå˜é‡çš„è®¾ç½®ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="Dockerfile">ENV DEFAULT_PORT=8080
</code></pre>
<pre><code class="Shell">docker run -e &quot;DEFAULT_PORT=8000&quot; ...
</code></pre>
</li>
<li><p><strong>USER</strong>ï¼šæŒ‡å®šé•œåƒä¼šä»¥ä»€ä¹ˆç”¨æˆ·èº«ä»½å»è¿è¡Œã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="Dockerfile">USER nginx
</code></pre>
</li>
<li><p><strong>VOLUME</strong>ï¼šåœ¨åˆ›å»ºå®¹å™¨æ—¶æ·»åŠ ä¸€ä¸ªæ•°æ®å·çš„æŒ‚è½½ç‚¹ã€‚é€šè¿‡æ•°æ®å·æ“ä½œå¯ä»¥å®ç°å®¹å™¨é—´æ•°æ®çš„å…±äº«å’Œé‡ç”¨ï¼Œå¯¹å·æ‰€ä½œçš„ä¿®æ”¹å¯ä»¥é©¬ä¸Šç”Ÿæ•ˆè€Œä¸éœ€è¦é‡æ–°å¯åŠ¨å®¹å™¨ï¼Œæˆ‘ä»¬ä¹‹å‰åˆ›å»ºå®¹å™¨æ—¶ä½¿ç”¨<code>--volume</code>å‚æ•°å°±æ˜¯ä¸ºäº†å®ç°æ•°æ®å·çš„æ˜ å°„æ“ä½œã€‚</p>
<pre><code class="Dockerfile">VOLUME [&quot;/è·¯å¾„1&quot;, &quot;/è·¯å¾„2/å­è·¯å¾„2.1/&quot;, ...]
</code></pre>
</li>
<li><p><strong>ADD</strong>ï¼šå°†æ„å»ºç›®å½•ä¸‹çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹å¤åˆ¶åˆ°é•œåƒä¸­ï¼Œå¦‚æœæ˜¯å‹ç¼©æ–‡ä»¶å’Œå½’æ¡£æ–‡ä»¶ï¼ŒADDå‘½ä»¤ä¼šå¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œè§£å‹ç¼©è§£å½’æ¡£çš„æ“ä½œã€‚</p>
<pre><code class="Dockerfile">ADD [--chown=&lt;ç”¨æˆ·&gt;:&lt;ç”¨æˆ·ç»„&gt;] &lt;æºæ–‡ä»¶&gt; &lt;ç›®æ ‡æ–‡ä»¶&gt;
</code></pre>
</li>
<li><p><strong>COPY</strong>ï¼šéå¸¸ç±»ä¼¼äºADDï¼Œä½†ä¸ä¼šä¸»åŠ¨å¯¹æ–‡ä»¶è¿›è¡Œæå–æ“ä½œã€‚</p>
</li>
<li><p><strong>LABEL</strong>ï¼šä¸ºDockeré•œåƒæ·»åŠ ä¸€äº›å…ƒæ•°æ®ï¼Œåœ¨ä½¿ç”¨<code>docker inspect</code>å‘½ä»¤æ—¶ä¼šçœ‹åˆ°è¿™äº›å…ƒæ•°æ®ã€‚</p>
<pre><code class="Dockerfile">LABEL version=&quot;1.0.0&quot; location=&quot;Chengdu&quot;
</code></pre>
</li>
<li><p><strong>ONBUILD</strong>ï¼šä¸ºé•œåƒæ·»åŠ è§¦å‘å™¨ï¼Œå½“ä¸€ä¸ªé•œåƒè¢«ç”¨ä½œå…¶ä»–é•œåƒçš„åŸºç¡€é•œåƒï¼Œè§¦å‘å™¨å°†ä¼šè¢«æ‰§è¡Œã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="Dockerfile">ONBUILD ADD . /app/src
ONBUILD RUN cd /app/src &amp;&amp; make
</code></pre>
</li>
</ol>
<h3 id="å¤šå®¹å™¨ç®¡ç†"><a href="#å¤šå®¹å™¨ç®¡ç†" class="headerlink" title="å¤šå®¹å™¨ç®¡ç†"></a>å¤šå®¹å™¨ç®¡ç†</h3><p>æˆ‘ä»¬çš„é¡¹ç›®å¯èƒ½ä¼šä½¿ç”¨äº†å¤šä¸ªå®¹å™¨ï¼Œå®¹å™¨å¤šäº†ä¹‹åç®¡ç†å®¹å™¨çš„å·¥ä½œå°±ä¼šå˜å¾—éº»çƒ¦ã€‚å¦‚æœè¦å¯¹å¤šä¸ªå®¹å™¨è¿›è¡Œè‡ªåŠ¨é…ç½®ä½¿å¾—å®¹å™¨å¯ä»¥ç›¸äº’åä½œç”šè‡³å®ç°å¤æ‚çš„è°ƒåº¦ï¼Œè¿™å°±éœ€è¦è¿›è¡Œå®¹å™¨ç¼–æ’ã€‚DockeråŸç”Ÿå¯¹å®¹å™¨ç¼–æ’çš„æ”¯æŒéå¸¸å¼±ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ç¤¾åŒºæä¾›çš„å·¥å…·æ¥å®ç°å®¹å™¨ç¼–æ’ã€‚</p>
<h4 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h4><p>å¯ä»¥é€šè¿‡å®‰è£…Docker Composeå·¥å…·æ¥å®ç°åŸºäºYAMLæ–‡ä»¶çš„å®¹å™¨ç¼–æ’ï¼ŒYAMLæ–‡ä»¶ä¼šå®šä¹‰ä¸€ç³»åˆ—çš„å®¹å™¨ä»¥åŠå®¹å™¨è¿è¡Œæ—¶çš„å±æ€§ï¼ŒDocker Composeä¼šæ ¹æ®è¿™äº›é…ç½®æ¥ç®¡ç†å®¹å™¨ã€‚</p>
<ol>
<li><p>å®‰è£…Docker Composeã€‚</p>
<pre><code class="Shell">curl -L &quot;https://github.com/docker/compose/releases/download/1.25.4/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
</code></pre>
<blockquote>
<p>è¯´æ˜ï¼šå¦‚æœæ²¡æœ‰curlå·¥å…·ï¼Œåœ¨CentOSä¸‹å¯ä»¥å…ˆé€šè¿‡åŒ…ç®¡ç†å·¥å…·yumå®‰è£…curlå†æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ã€‚</p>
</blockquote>
<p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨Pythonçš„åŒ…ç®¡ç†å·¥å…·pipæ¥å®‰è£…Docker Composeï¼Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code class="Shell">pip3 install -U docker-compose
</code></pre>
</li>
<li><p>ä½¿ç”¨Docker Composeã€‚</p>
<p>æˆ‘ä»¬åœ¨åˆšæ‰çš„Flaské¡¹ç›®ä¸­å¼•å…¥ç¼“å­˜ï¼Œç„¶åå†åˆ©ç”¨Flaskæä¾›çš„æ•°æ®æ¥å£ä¸ºå‰ç«¯é¡µé¢æä¾›æ•°æ®ï¼Œä½¿ç”¨Vue.jsè¿›è¡Œé¡µé¢æ¸²æŸ“å¹¶å°†é™æ€é¡µé¢éƒ¨ç½²åœ¨NginxæœåŠ¡å™¨ä¸Šã€‚é¡¹ç›®æ–‡ä»¶å¤¹ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="Shell">[ECS-root ~]# tree temp
temp
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ html
â”‚   â””â”€â”€ index.html
â””â”€â”€ myapp
    â”œâ”€â”€ api
    â”‚   â”œâ”€â”€ app.py
    â”‚   â”œâ”€â”€ requirements.txt
    â”‚   â””â”€â”€ start.sh
    â””â”€â”€ Dockerfile
</code></pre>
<p>ä¿®æ”¹åçš„app.pyæ–‡ä»¶ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="Python">from pickle import dumps, loads

from flask import Flask
from flask_restful import Resource, Api
from flask_cors import CORS
from redis import Redis

app = Flask(__name__)
CORS(app, resources=&#123;r&#39;/api/*&#39;: &#123;&#39;origins&#39;: &#39;*&#39;&#125;&#125;)
api = Api(app)
redis = Redis(host=&#39;redis-master&#39;, port=6379)


class Product(Resource):

    def get(self):
        data = redis.get(&#39;products&#39;)
        if data:
            products = loads(data)
        else:
            products = [&#39;Ice Cream&#39;, &#39;Chocolate&#39;, &#39;Coca Cola&#39;, &#39;Hamburger&#39;]
            redis.set(&#39;products&#39;, dumps(products))
        return &#123;&#39;products&#39;: products&#125;


api.add_resource(Product, &#39;/api/products&#39;)
</code></pre>
<p>htmlæ–‡ä»¶å¤¹ç”¨æ¥ä¿å­˜é™æ€é¡µé¢ï¼Œç¨åæˆ‘ä»¬ä¼šé€šä¸€ä¸ªè¿è¡ŒNginxçš„å®¹å™¨æ¥å‘æµè§ˆå™¨æä¾›é™æ€é¡µé¢ã€‚index.htmlæ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="HTML">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;title&gt;é¦–é¡µ&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id=&quot;app&quot;&gt;
        &lt;h2&gt;äº§å“åˆ—è¡¨&lt;/h2&gt;
        &lt;ul&gt;
            &lt;li v-for=&quot;product in products&quot;&gt;&#123;&#123; product &#125;&#125;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
    &lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;&gt;&lt;/script&gt;
    &lt;script&gt;
        new Vue(&#123;
            el: &#39;#app&#39;, 
            data: &#123;
                products: []
            &#125;,
            created() &#123;
                fetch(&#39;http://1.2.3.4:8000/api/products&#39;)
                    .then(resp =&gt; resp.json())
                    .then(json =&gt; &#123;this.products = json.products&#125;)
            &#125;
        &#125;)
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦é€šè¿‡docker-compose.ymlæ–‡ä»¶æ¥åˆ›å»ºä¸‰ä¸ªå®¹å™¨å¹¶æŒ‡æ˜å®¹å™¨ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p>
<pre><code class="YAML">version: &#39;3&#39;
services:
  api-server:
    build: ./myapp
    ports:
      - &#39;8000:8000&#39;
    links:
      - redis-master
  web-server:
    image: nginx
    ports:
      - &#39;80:80&#39;
    volumes:
      - ./html:/usr/share/nginx/html
  redis-master:
    image: redis
    expose:
      - &#39;6379&#39;
</code></pre>
<p>æœ‰äº†è¿™ä¸ªYAMLæ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨<code>docker-compose</code>å‘½ä»¤æ¥åˆ›å»ºå®¹å™¨è¿è¡Œé¡¹ç›®ï¼Œå…¶å‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="Shell">[ECS-root temp]# docker-compose up
Creating network &quot;temp_default&quot; with the default driver
Creating temp_web-server_1   ... done
Creating temp_redis-master_1 ... done
Creating temp_api-server_1   ... done
Attaching to temp_redis-master_1, temp_web-server_1, temp_api-server_1
redis-master_1  | 1:C 05 Dec 2019 11:57:26.828 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
redis-master_1  | 1:C 05 Dec 2019 11:57:26.828 # Redis version=5.0.6, bits=64, commit=00000000, modified=0, pid=1, just started
redis-master_1  | 1:C 05 Dec 2019 11:57:26.828 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf
redis-master_1  | 1:M 05 Dec 2019 11:57:26.830 * Running mode=standalone, port=6379.
redis-master_1  | 1:M 05 Dec 2019 11:57:26.831 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.
redis-master_1  | 1:M 05 Dec 2019 11:57:26.831 # Server initialized
redis-master_1  | 1:M 05 Dec 2019 11:57:26.831 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add &#39;vm.overcommit_memory = 1&#39; to /etc/sysctl.conf and then reboot or run the command &#39;sysctl vm.overcommit_memory=1&#39; for this to take effect.
redis-master_1  | 1:M 05 Dec 2019 11:57:26.831 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command &#39;echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled&#39; as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.
redis-master_1  | 1:M 05 Dec 2019 11:57:26.831 * Ready to accept connections
api-server_1    | [2019-12-05 11:57:27 +0000] [1] [INFO] Starting gunicorn 20.0.4
api-server_1    | [2019-12-05 11:57:27 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)
api-server_1    | [2019-12-05 11:57:27 +0000] [1] [INFO] Using worker: sync
api-server_1    | [2019-12-05 11:57:27 +0000] [8] [INFO] Booting worker with pid: 8
api-server_1    | [2019-12-05 11:57:27 +0000] [9] [INFO] Booting worker with pid: 9
api-server_1    | [2019-12-05 11:57:27 +0000] [10] [INFO] Booting worker with pid: 10
api-server_1    | [2019-12-05 11:57:27 +0000] [11] [INFO] Booting worker with pid: 11
</code></pre>
<p> è¦åœæ­¢å®¹å™¨çš„è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p>
<pre><code class="Shell">docker-compose down
</code></pre>
</li>
</ol>
<h4 id="Kubernetesï¼ˆK8Sï¼‰"><a href="#Kubernetesï¼ˆK8Sï¼‰" class="headerlink" title="Kubernetesï¼ˆK8Sï¼‰"></a>Kubernetesï¼ˆK8Sï¼‰</h4><p>å®é™…çš„ç”Ÿäº§ç¯å¢ƒä¸­å¸¸å¸¸éœ€è¦éƒ¨ç½²å’Œç®¡ç†å¤šä¸ªååŒå·¥ä½œçš„å®¹å™¨ï¼Œdocker composeè§£å†³äº†å¤šå®¹å™¨åˆ›å»ºå’Œç®¡ç†çš„é—®é¢˜ï¼Œä½†æ˜¯å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦Kubernetesï¼ˆä»¥ä¸‹éƒ½ç®€ç§°ä¸ºK8Sï¼‰æ¥æä¾›ä¸€ä¸ªè·¨ä¸»æœºé›†ç¾¤çš„å®¹å™¨è°ƒåº¦å¹³å°ã€‚K8Så¯ä»¥è¿›è¡Œè‡ªåŠ¨åŒ–å®¹å™¨çš„éƒ¨ç½²ã€æ‰©å±•å’Œæ“ä½œï¼Œä»è€Œæä¾›ä»¥å®¹å™¨ä¸ºä¸­å¿ƒçš„åŸºç¡€æ¶æ„ã€‚è¯¥é¡¹ç›®æ˜¯è°·æ­Œåœ¨2014å¹´å¯åŠ¨çš„é¡¹ç›®ï¼Œå»ºç«‹åœ¨è°·æ­Œå…¬å¸åä½™å¹´è¿ç»´ç»éªŒçš„åŸºç¡€ä¹‹ä¸Šï¼Œè€Œä¸”è°·æ­Œè‡ªå·±çš„åº”ç”¨ä¹Ÿæ˜¯è¿è¡Œåœ¨å®¹å™¨ä¸Šçš„ã€‚</p>

      
       <hr><span style="font-style: italic;color: gray;"> è½¬è½½è¯·æ³¨æ˜æ¥æºï¼Œæ¬¢è¿å¯¹æ–‡ç« ä¸­çš„å¼•ç”¨æ¥æºè¿›è¡Œè€ƒè¯ï¼Œæ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚å¯ä»¥åœ¨ä¸‹é¢è¯„è®ºåŒºè¯„è®ºï¼Œä¹Ÿå¯ä»¥é‚®ä»¶è‡³ jaytp@qq.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">ğŸ’°</a>
</p>






    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    Â©2016-2020 Yelog
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">Ã—</a>
    <div class="shang_tit">
        <p>Help us with donation</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="æ‰«ç æ”¯æŒ">
            <img src="/img/weixin.jpg" class="weixin" title="æ‰«ç æ”¯æŒ">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">alipay</label></span><span><label><input type="radio" name="pay" value="weixin">weixin</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*æ¸²æŸ“å¯¹åº”çš„è¡¨æ ¼æ ·å¼*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*æ¸²æŸ“æ‰“èµæ ·å¼*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*é«˜äº®ä»£ç å—è¡Œå·*/
        

        /*è®¿é—®æ•°é‡*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*ä»£ç é«˜äº®ï¼Œè¡Œå·å¯¹é½*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*æ‰“èµé¡µé¢éšè—ä¸å±•ç¤º*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--åŠ å…¥è¡Œå·çš„é«˜äº®ä»£ç å—æ ·å¼-->

<!--è‡ªå®šä¹‰æ ·å¼è®¾ç½®-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*åˆ—è¡¨æ ·å¼*/
    

    /* èƒŒæ™¯å›¾æ ·å¼ */
    
    


    /*å¼•ç”¨å—æ ·å¼*/
    

    /*æ–‡ç« åˆ—è¡¨èƒŒæ™¯å›¾*/
    

    
</style>









</html>
